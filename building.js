import { BoxGeometry, Group, Mesh, MeshStandardMaterial } from "three";

export function makeBuilding(stories = 10, width = 40, length = width, windowMargin = 2) {
    const bottomHeight = 8;
    const topHeight = bottomHeight - windowMargin;
    const bottomGeometry = new BoxGeometry(width, bottomHeight, length);
    const topGeometry = new BoxGeometry(width - windowMargin, topHeight, length - windowMargin);
    const building = new Group();
    let topPos = 0;
    for (let i = 0; i < stories; i++) {
        const bottomObj = new Mesh(bottomGeometry, bottomMaterial);
        const topObj = new Mesh(topGeometry, topMaterial);
        const bottomPos = (bottomHeight + topHeight) * i;
        topPos = bottomPos + topHeight;
        bottomObj.position.y = bottomPos;

        topObj.position.y = topPos;
        building.add(bottomObj, topObj);
    }
    const topPart = new Mesh(bottomGeometry, bottomMaterial);
    topPart.position.y = topPos + topHeight;
    building.add(topPart);

    building.position.y = bottomHeight / 2;
    return building;
}


const bottomMaterial = new MeshStandardMaterial({
    color: 0xff888888,
    metalness: 0.6,
    depthTest: true,
    depthWrite: true,
    flatShading: true,
    roughness: 0.3,
});


const topMaterial = new MeshStandardMaterial({
    color: 0xff010101,
    metalness: 0.5,
    depthTest: true,
    depthWrite: true,
    flatShading: true,
    roughness: 0,

});